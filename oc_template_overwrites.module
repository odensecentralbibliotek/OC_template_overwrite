<?php
/*
 * Hooks into select modules template registry entries and swaps out with 
 * a position inside this module instead of their original module/templates.
 * allowing us to overwrite the backend functionality without including
 * templates in the admin theme.
 *  
 */
function oc_template_overwrites_theme_registry_alter(&$theme_registry)
{
    if(isset($theme_registry["opening_hours_admin"]))
    {
        $OC_template_repo = drupal_get_path('module','oc_template_overwrites') . "/templates";
        $theme_registry["opening_hours_admin"]["path"] = $OC_template_repo;
    }
    if(isset($theme_registry["file_entity"]))
    {
        $OC_template_repo = "file_entity";
        $ModuleTemplatePath = drupal_get_path('module','oc_template_overwrites') . "/templates";
        $theme_registry["file_entity"]["template"] = $OC_template_repo;
        $theme_registry["file_entity"]["path"] =  $ModuleTemplatePath;	
    }
}
/**
 * Implements hook_permission().
 */
function oc_template_overwrites_permission() {
  return array(
    'administer oc_template_overwrites' => array(
      'title' => t('Administrer oc_template_overwrites'),
      'description' => t('Giver adgang til configuere oc tempate overwrites'),

    )
  );
}
function  oc_template_overwrites_menu() {
  $items = array();
  $items['admin/settings/oc_template_overwrites'] = array(
    'title' => 'OC Overwrites',
    'description' => 'Configuration af oc digitalpost modul',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('oc_template_overwrites_admin'),
    'access arguments' => array('administer oc_template_overwrites'),
    'file' => 'oc_template_overwrites.admin.inc'
   );
  
  return $items;
}
/*
 * Hook places where we want to inject.
 */
function oc_template_overwrites_preprocess_html(&$page)
{
    //Add javascript if we are on frontpage.
    if(drupal_is_front_page() && variable_get('Place2book_front_ticket_status', 0) == 1) //The setting has been enabled.
    {
        $Path = drupal_get_path('module', 'oc_template_overwrites') . "/js/p2b_frontpagestatus.js";
        drupal_add_js($Path);
    }
}

